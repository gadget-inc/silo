---
alwaysApply: true
---

When running tests, assume the background services required are already running.

You can run rust tests with `cargo test`. Some cargo tests have special requirements:

- the k8s coordination tests must run single-threaded: `cargo test k8s_ -- --test-threads=1`
- the turmoil DST tests which you don't need to run unless told to

You can run TypeScript client tests with

```shell
cd typescript_client
pnpm test
```

You can run the TypeScript integration tests with:

```shell
cd typescript_client
RUN_INTEGRATION=true pnpm test
```

The TypeScript integration tests require a running Silo server. Assume one is running. Don't run `dev` or `process-compose` yourself unless you are a cloud agent.

Use the #[silo::test] macro for wrapping rust test cases (not tokio::test).

Run tests as often as you like. When running tests, don't run them within the sandbox with limited permissions -- it often causes false positives with failed network accesses or SSL issues.

# Deterministic simulation tests

We use turmoil and mad-turmoil for DST tests. See CONTRIBUTING.md for more details.

# Kubernetes tests

Assume the developer has a k8s cluster running locally in orbstack which can be used for executing k8s tests.
